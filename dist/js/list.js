"use strict";$(function(){$(".vab").on("mouseover",function(){$(this).addClass("hover"),$(this).find(".gunzi").css("display","block"),$(this).find(".vb").css("display","block"),$(this).find("em").css("color","red")}),$(".vab").on("mouseout",function(){$(this).find("em").css("color","gray"),$(this).removeClass("hover"),$(this).find(".gunzi").css("display","none"),$(this).find(".vb").css("display","none")});var n=Cookie.get("bb");n?($(".aa").html(""+n),$(".aa").next().next().html(" [退出]")):$(".aa").click(function(){window.open("html/denglu.html")}),$(".cc").click(function(){Cookie.set("bb","",{path:"/"}),location.reload()});var a=document.querySelector(".selectSwitch"),s=document.querySelector(".slectCon"),e=!0;a.onclick=function(){e?s.classList.add("on"):s.classList.remove("on"),e=!e};var i,c=document.querySelector(".out"),t=document.querySelector(".next"),o=document.querySelector(".curs"),r=document.querySelector(".prev"),l=1,d="time="+new Date;function u(){r.style.display=1<l?"block":"none",t.style.display=l!=i?"block":"none"}ajax("GET","../api/anniuye.php",d,function(n){i=n/52;for(var a=0;a<i;a++)o.innerHTML+='<li class="">\n                                    <a href="javascript:;">'+(a+1)+"</a>\n                                </li>";o.children[0].className="current"}),o.onclick=function(n){if("a"==(n=n||window.event).target.tagName.toLowerCase()){h(l=n.target.innerText,52);for(var a=0;a<o.children.length;a++)o.children[a].className="";o.children[l-1].className="current",u()}},r.onclick=function(){--l<=1&&(l=1),h(l,52);for(var n=0;n<o.children.length;n++)o.children[n].className="";o.children[l-1].className="current",u()},t.onclick=function(){l++,(l=i)&&(l=i),h(l,52);for(var n=0;n<o.children.length;n++)o.children[n].className="";o.children[l-1].className="current",u()};var p=document.querySelector(".inputxt");function h(n,a){var s="ye="+n+"&num="+a+"&time="+new Date;ajax("GET","../api/listgood.php",s,function(n){var a=JSON.parse(n).map(function(n){return'<li class="listbook" data-id='+n.id+'>\n                            <div class="cover">\n                                <a href="javascript:;">\n                                    <img src="'+n.path+'" height="200" width="142" alt="" class="imgbook" />\n                                </a>\n                            </div>\n                            <div class="infor">\n                                <div class="priceWrap">\n                                    <span class="sellPrice">￥'+n.pirce+'</span>\n                                    <span class="discount">('+n.discount+'折)</span>\n                                    <del class="cost">￥'+n.cost+'</del>\n                                </div>\n                                <h2 class="name">'+n.book+'</h2>\n                                <div class="otherInfor">\n                                    <a href="javascript:;" class="author ">'+n.name+'</a>\n                                    <i>&nbsp;/</i>\n                                    <a href="javascript:;" class="publisher">'+n.publishing+'</a>\n                                </div>\n                                <div class="oparateButton">\n                                    <a href="javascript:;" class="buyButton">加入购物车</a>\n                                    <a href="javascript:;" class="collectBtn">收藏</a>\n                                </div>\n                            </div>\n                        </li> '}).join("");c.innerHTML=a})}document.querySelector(".gobtn").onclick=function(){var n=p.value.trim();n<1||i<n?alert("陈独秀同志，请不要腰间盘突出，不然你扁桃体会发炎的"):h(n,52)},c.innerHTML=h(1,52);var v,f=document.querySelector(".dingjia"),m=!0;f.onclick=function(){(v="cost",m)?j("asc","../api/listorder.php"):(console.log(2),j("desc","../api/listorder.php"));m=!m};var b=document.querySelector(".zhekou"),y=!0;b.onclick=function(){(v="discount",y)?j("asc","../api/listorder.php"):j("desc","../api/listorder.php");y=!y};var g=document.querySelector(".shoujia"),k=!0;function j(n,a){var s="ye=1&qty=52&set="+v+"&kg="+n+"&time="+new Date;ajax("GET",a,s,function(n){var a=JSON.parse(n).datalist.map(function(n){return'<li class="listbook" data-id='+n.id+'>\n                            <div class="cover">\n                                <a href="javascript:;">\n                                    <img src="'+n.path+'" height="200" width="142" alt="" class="imgbook" />\n                                </a>\n                            </div>\n                            <div class="infor">\n                                <div class="priceWrap">\n                                    <span class="sellPrice">￥'+n.pirce+'</span>\n                                    <span class="discount">('+n.discount+'折)</span>\n                                    <del class="cost">￥'+n.cost+'</del>\n                                </div>\n                                <h2 class="name">'+n.book+'</h2>\n                                <div class="otherInfor">\n                                    <a href="javascript:;" class="author ">'+n.name+'</a>\n                                    <i>&nbsp;/</i>\n                                    <a href="javascript:;" class="publisher">'+n.publishing+'</a>\n                                </div>\n                                <div class="oparateButton">\n                                    <a href="javascript:;" class="buyButton">加入购物车</a>\n                                    <a href="javascript:;" class="collectBtn">收藏</a>\n                                </div>\n                            </div>\n                        </li> '}).join("");c.innerHTML=a})}g.onclick=function(){(v="pirce",k)?j("asc","../api/listorder.php"):j("desc","../api/listorder.php");k=!k};var w=document.querySelector(".listRightInner"),S=w.offsetHeight;window.onscroll=function(){var n=window.scrollY;w.style.top=S<=n?(w.classList.add("absoluted"),4837<n?"1700px":1*(n-S)+"px"):(w.classList.remove("absoluted"),"1470px")},$(".out").on("click","li",function(){var n=$(this).attr("data-id");window.open("../html/show.html?"+n)})});